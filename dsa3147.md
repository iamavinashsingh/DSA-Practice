# 3147. Taking Maximum Energy From the Mystic Dungeon
In a mystic dungeon, n magicians are standing in a line. Each magician has an attribute that gives you energy. Some magicians can give you negative energy, which means taking energy from you.

You have been cursed in such a way that after absorbing energy from magician i, you will be instantly transported to magician (i + k). This process will be repeated until you reach the magician where (i + k) does not exist.

In other words, you will choose a starting point and then teleport with k jumps until you reach the end of the magicians' sequence, absorbing all the energy during the journey.

You are given an array energy and an integer k. Return the maximum possible energy you can gain.

Note that when you are reach a magician, you must take energy from them, whether it is negative or positive energy.

 

Example 1:

Input: energy = [5,2,-10,-5,1], k = 3

Output: 3

Explanation: We can gain a total energy of 3 by starting from magician 1 absorbing 2 + 1 = 3.

Example 2:

Input: energy = [-2,-3,-1], k = 2

Output: -1

Explanation: We can gain a total energy of -1 by starting from magician 2.

 

Constraints:

1 <= energy.length <= 105
-1000 <= energy[i] <= 1000
1 <= k <= energy.length - 1

---

Tweet 1 (Hook):
#Day82 of #LearningInPublic
Todayâ€™s @LeetCode POTD is a spooky one ðŸ‘»:
3147. Taking Maximum Energy From the Mystic Dungeon ðŸ°âœ¨

Youâ€™re cursed! Every time you take energy from a magician, you teleport k steps ahead. Some magicians drain energy, some boost you. How to maximize energy? ðŸ§µ
#DSA #LeetCode #100DaysOfCode

Tweet 2 (Setup):
Hereâ€™s the situation:

Each magician has energy (+ or -)

Once you absorb â†’ you must teleport k steps forward

This repeats until you fall off the line

Your goal = pick the best starting magician to maximize total energy âš¡

Tweet 3 (Analogy):
Think of it like a video game dungeon ðŸŽ®:

Enter at any door (magician)

Every time you collect energy, the dungeon forces you to jump ahead k rooms

You canâ€™t stop, you can only choose the best entry point

Tweet 4 (Core Idea):
Key insight ðŸ§ :

From any magician i, your path is fixed (i â†’ i+k â†’ i+2k â€¦)

So we calculate the total energy of each possible path

The answer = the maximum among all these paths

Tweet 5 (Strategy):
How to do it efficiently?

Start from the end and move backwards ðŸ”„

For each magician, store â†’ â€œenergy at i + best path from i+kâ€

This way, each magician knows the max energy if you start with them

Tweet 6 (Example):
energy = [5,2,-10,-5,1], k = 3

Start at index 1 â†’ path = 2 â†’ 1 â†’ total = 3 âœ…

Start at index 0 â†’ path = 5 â†’ -5 â†’ total = 0

Start at index 2 â†’ path = -10 â†’ total = -10
Max = 3 ðŸŽ‰

Tweet 7 (Engagement):
The lesson?
Sometimes in life (and DSA ðŸ˜…), you donâ€™t get to choose your next stepâ€¦
You only choose your starting point wisely. That alone decides your outcome ðŸ”®

Would you start at the risky high-energy magicians or play it safe? ðŸ‘€

Tweet 8 (Closing):
Thatâ€™s how we cracked todayâ€™s mystic dungeon ðŸ°âœ¨
ðŸ‘‰ Always think in terms of fixed paths & dynamic programming backward.






---

```cpp
class Solution {
public:
    int maximumEnergy(vector<int>& energy, int k) {
        int n = energy.size();
        vector<int> dp(n);
        int ans = INT_MIN;

        for (int i = n - 1; i >= 0; i--) {
            dp[i] = energy[i] + ((i + k < n) ? dp[i + k] : 0);
            ans = max(ans, dp[i]);
        }
        return ans;
    }
};
```
